import math
from collections import defaultdict
import itertools
import re

# Parse the input tiles
def parse_tiles(input_text):
    tiles = {}
    tile_sections = input_text.strip().split('\n\n')
    for section in tile_sections:
        lines = section.strip().split('\n')
        tile_id = int(lines[0][5:-1])
        tiles[tile_id] = [list(line) for line in lines[1:]]
    return tiles

# Get all four edges of a tile
def get_edges(tile):
    top = ''.join(tile[0])
    bottom = ''.join(tile[-1])
    left = ''.join(row[0] for row in tile)
    right = ''.join(row[-1] for row in tile)
    return [top, right, bottom, left]

# Find all matches between tiles
def find_matches(tiles):
    edges_to_tiles = defaultdict(set)
    for tile_id, tile in tiles.items():
        for edge in get_edges(tile):
            edges_to_tiles[edge].add(tile_id)
            edges_to_tiles[edge[::-1]].add(tile_id)  # Reverse for flipped edges

    matches = defaultdict(set)
    for edge, tile_ids in edges_to_tiles.items():
        if len(tile_ids) == 2:
            tile1, tile2 = tile_ids
            matches[tile1].add(tile2)
            matches[tile2].add(tile1)
    return matches

# Find the corner tiles
def find_corner_tiles(matches):
    corner_tiles = [tile_id for tile_id, neighbors in matches.items() if len(neighbors) == 2]
    return corner_tiles

# Remove borders from a tile
def remove_borders(tile):
    return [row[1:-1] for row in tile[1:-1]]

# Get all transformations (rotations and flips) of a tile
def get_transformations(tile):
    transformations = []
    for flip in [False, True]:
        if flip:
            tile = [list(reversed(row)) for row in tile]  # Flip horizontally
        for _ in range(4):  # Rotations
            transformations.append([''.join(row) for row in tile])
            tile = [list(row) for row in zip(*tile[::-1])]  # Rotate 90 degrees clockwise
    return transformations

# Assemble the full image from tiles
def assemble_image(tiles, matches):
    grid_size = int(math.sqrt(len(tiles)))  # Assuming square grid

    # Find a corner tile to start with
    corner_tile_id = find_corner_tiles(matches)[0]

    # Try all possible orientations of the corner tile
    for corner_transformation in get_transformations(tiles[corner_tile_id]):
        image_grid = [[None for _ in range(grid_size)] for _ in range(grid_size)]
        used_tiles = set()
        tile_orientations = {}  # To store the chosen orientation for each tile

        tile_orientations[corner_tile_id] = corner_transformation
        image_grid[0][0] = corner_tile_id
        used_tiles.add(corner_tile_id)

        # Now assemble the rest of the grid
        success = assemble_rest_of_grid(tiles, matches, image_grid, tile_orientations, used_tiles, grid_size, 0, 1)
        if success:
            break
    else:
        print("Failed to assemble the image")
        return []

    # Now we have image_grid filled with tile IDs, and tile_orientations with the chosen orientations

    # Assemble the image
    tile_size = len(next(iter(tiles.values()))) - 2  # After removing borders
    image = []
    for i in range(grid_size):
        transformed_rows = [[] for _ in range(tile_size)]
        for j in range(grid_size):
            tile_id = image_grid[i][j]
            tile = tile_orientations[tile_id]
            tile = remove_borders(tile)
            for k, tile_row in enumerate(tile):
                transformed_rows[k].extend(tile_row)
        image.extend(transformed_rows)
    return image

def assemble_rest_of_grid(tiles, matches, image_grid, tile_orientations, used_tiles, grid_size, i, j):
    if i == grid_size:
        # All rows completed
        return True
    if j == grid_size:
        # End of row, move to next row
        return assemble_rest_of_grid(tiles, matches, image_grid, tile_orientations, used_tiles, grid_size, i+1, 0)

    # Determine possible candidate tiles based on matches with adjacent tiles
    candidates = set(tiles.keys()) - used_tiles

    if i > 0:
        top_tile_id = image_grid[i - 1][j]
        candidates &= matches[top_tile_id]
    if j > 0:
        left_tile_id = image_grid[i][j - 1]
        candidates &= matches[left_tile_id]

    for candidate_tile_id in candidates:
        for transformation in get_transformations(tiles[candidate_tile_id]):
            match_top = True
            match_left = True

            if i > 0:
                top_tile_id = image_grid[i - 1][j]
                top_tile = tile_orientations[top_tile_id]
                bottom_edge_of_top_tile = get_edges(top_tile)[2]
                top_edge_of_candidate = get_edges(transformation)[0]
                if top_edge_of_candidate != bottom_edge_of_top_tile:
                    match_top = False

            if j > 0:
                left_tile_id = image_grid[i][j - 1]
                left_tile = tile_orientations[left_tile_id]
                right_edge_of_left_tile = get_edges(left_tile)[1]
                left_edge_of_candidate = get_edges(transformation)[3]
                if left_edge_of_candidate != right_edge_of_left_tile:
                    match_left = False

            if match_top and match_left:
                # Place the tile
                image_grid[i][j] = candidate_tile_id
                tile_orientations[candidate_tile_id] = transformation
                used_tiles.add(candidate_tile_id)

                # Recurse to next position
                if assemble_rest_of_grid(tiles, matches, image_grid, tile_orientations, used_tiles, grid_size, i, j+1):
                    return True

                # Backtrack
                used_tiles.remove(candidate_tile_id)
                tile_orientations.pop(candidate_tile_id)
                image_grid[i][j] = None

        # No matching orientation found for this tile, try next candidate
    # No candidate found, return False
    return False

# Find sea monsters in the image
def find_sea_monsters(image):
    sea_monster = [
        re.compile('..................#.'),
        re.compile('#....##....##....###'),
        re.compile('.#..#..#..#..#..#...')
    ]
    max_count = 0
    marked_image = None

    for transformation in get_transformations(image):
        local_count = 0
        temp_image = [list(row) for row in transformation]
        for y in range(len(transformation) - 2):
            for x in range(len(transformation[0]) - 19):
                if all(sea_monster[i].match(''.join(transformation[y + i][x:x + 20])) for i in range(3)):
                    local_count += 1
                    # Mark the sea monster
                    for i, line in enumerate(sea_monster):
                        for j, char in enumerate(line.pattern):
                            if char == '#':
                                temp_image[y + i][x + j] = 'O'
        if local_count > max_count:
            max_count = local_count
            marked_image = temp_image
    return max_count, marked_image

# Calculate water roughness
def calculate_water_roughness(image, sea_monster_count):
    total_hashes = sum(row.count('#') for row in image)
    sea_monster_hashes = sea_monster_count * 15
    return total_hashes - sea_monster_hashes

# Main function
def main(input_text):
    tiles = parse_tiles(input_text)
    matches = find_matches(tiles)
    assembled_image = assemble_image(tiles, matches)
    if not assembled_image:
        print("Failed to assemble the image")
        return 0
    sea_monster_count, marked_image = find_sea_monsters(assembled_image)
    water_roughness = calculate_water_roughness(assembled_image, sea_monster_count)

    # Print the marked image with sea monsters as 'O'
    if marked_image:
        print("\nMarked Image with Sea Monsters:")
        for row in marked_image:
            print(''.join(row))

    return water_roughness

# Example input
input_text = """
Tile 3187:
.........#
....##...#
##..#.#..#
#.##....##
..#.##...#
##.#..#.#.
#.##.....#
####......
...#..#..#
.##..##.#.

Tile 1223:
###.#..###
#......#.#
........##
..#.....##
##.......#
#........#
#..#.#...#
..#.##....
####.....#
.##..##..#

Tile 1913:
..#.......
##........
##.#.#..##
#..#......
###.#....#
.....##.#.
.......###
.##......#
#.....##..
#.#.#.###.

Tile 1301:
#...#..#.#
#..#...#..
#........#
.#..#....#
.#.#.##.#.
#....##.##
#...#....#
#.##....##
.###....#.
.#.#####..

Tile 3943:
..#.#.#..#
.#..#....#
#.....###.
#..#...#..
....#.##.#
.#........
#..#...#.#
#..#.#..##
....#...#.
#.####....

Tile 3023:
#..#....##
##..#.##.#
#.##.#...#
....##...#
.##..##..#
......#...
##......##
#..#..#...
##.#.....#
.#..#....#

Tile 3299:
#...#....#
.####.#..#
.........#
.#.....#..
#...#.##.#
..#.#..#.#
##.##....#
#..#.#...#
##........
.#.#.#.###

Tile 3677:
..#.#..#.#
#.#..#...#
#..#.#...#
#...#.##..
#..#......
#.#..#....
#...#..#..
#....##..#
..#..#.#..
#.####.#..

Tile 2803:
.#.#..####
#.#.#....#
#.......##
..#..##.##
#...#.....
##.#.....#
..#..#..##
...#.#.#..
#...#.###.
####.##.##

Tile 3343:
###.##..##
...#.#...#
#....#..#.
#...#....#
..#.#.....
.######.##
#.###.####
..##...##.
#.##......
...#..#.#.

Tile 1987:
.......##.
.#.....#..
#....###..
###.##....
.#...#...#
#.#..###.#
......#..#
...##.....
...##....#
#...#####.

Tile 1609:
...#.##.##
......#...
..#..#.#.#
...##.....
###.####.#
#......###
#.....##..
.##.#..#..
.##...#...
#.###...##

Tile 2221:
###.######
.##......#
##...#...#
..........
....#.#..#
#..#.....#
##..##...#
##..##....
.#.....#..
..########

Tile 2297:
.###..##.#
#..###....
..#..#..##
....######
##.......#
.......#.#
#.....#..#
###....#.#
#....##..#
....##.#..

Tile 2269:
##.....#..
.###..###.
#..##.....
....#.....
#..#...#.#
#....#..#.
#...###.##
.........#
....#.....
##.....#.#

Tile 2287:
#########.
##...#.###
#..#.#....
..##..####
....#.....
#....#.#.#
......#..#
#......#..
##..##....
##.......#

Tile 2399:
#.#.#..###
....#.....
#....##..#
##..#....#
#.#.#.....
.#...#..#.
#.#...#..#
.....##..#
#...##...#
#..##.##.#

Tile 1423:
##...#.#..
#.#...#.#.
.###..#..#
.........#
#...#...#.
#....##.##
#......#..
##..##...#
.#......##
...#.###.#

Tile 2621:
###.....#.
..#....#..
......#...
##.......#
.#.#..##..
#.#.##...#
#...#..#.#
#..###.#.#
###.......
..#.......

Tile 2003:
..#..#####
#.#.....#.
#..#.#...#
.#....#...
#.#.##.##.
##.#..##.#
.####..#.#
#.#...#..#
..####.#.#
..#..###.#

Tile 3889:
.#.##.#.##
.........#
######..##
...#...#..
#.....#..#
....#....#
#........#
...#.#.#.#
#..##..#..
..##..#...

Tile 1667:
#...####.#
#######..#
#.........
........##
.....##...
#...###..#
...#.....#
#..#....#.
.#.#.##..#
..#.###.#.

Tile 1877:
...#......
.#.#.#..#.
.....##..#
..........
...#.#....
#.##....##
#.#..##...
#..##..#..
#.........
##..#...##

Tile 2657:
#.#..####.
.....#...#
........#.
#.#......#
#..##.....
#........#
...##.#...
#....#.#..
.......#.#
########..

Tile 1669:
.###.####.
......###.
.#.##...##
..##...#..
##......##
.#........
###..#.###
.##...#.#.
....###.##
.####....#

Tile 2843:
#...#.#.##
.#.....#..
##.#....##
##.#..####
##........
..#.....##
.#.#......
##..#.#...
.#.#.....#
.#.#....##

Tile 2243:
..#....##.
.#.......#
......#..#
##......#.
#.##.....#
........#.
#..#.#...#
##..#..#..
...#...#.#
....####.#

Tile 1543:
..#..##...
..##..##.#
...#......
#.......##
......#.##
.#...#....
#.##....##
##..##.#.#
#.###....#
######.#.#

Tile 1777:
##.##..###
#.#...##..
........##
##.#......
.#....##..
#........#
......#...
#.........
.........#
#..###....

Tile 2161:
########.#
....#.....
####.#....
#.####....
..###..#..
.#..#....#
...#####..
#....#....
......#..#
######.#.#

Tile 3167:
.#.....##.
#..#.....#
...###..##
#.#.......
#.###.....
.#......#.
.##.##.#.#
.#.#..##..
..#...#.##
##.#..#.#.

Tile 1279:
#.....#..#
#...###.#.
##..###.#.
..#....#.#
#..#......
.#.....#.#
....#...#.
#.......#.
#.........
....###.##

Tile 2711:
##.###..##
.......###
#...#..###
#.........
#####.#...
#..#.###..
......#...
##.......#
....#....#
..####..#.

Tile 1087:
...#.##...
#....#..##
.....##.##
.#...#...#
.##..#..##
#...#....#
..#.......
##........
#.#.###...
##.##..###

Tile 3947:
.##...###.
##......#.
.#........
........##
........##
#..###...#
##.......#
#....##..#
#........#
#.##..#..#

Tile 1571:
#######..#
..#.#...#.
.........#
..#......#
.........#
#.......##
...#..##.#
.#..#.....
#..#.#....
#.#....###

Tile 2521:
..#.#.####
#........#
..........
..#...#...
....##...#
...#...#..
#.#.#...##
#.........
.#...#.##.
##.#####.#

Tile 3533:
...#.#.#.#
..#.......
.........#
...#......
##..#.#...
...#..#.##
.#...#.#.#
..#..###.#
###...#.##
#.#.......

Tile 2339:
#.#####...
..##......
#...##...#
#.#.#.....
#......##.
#...#...#.
......#.##
....##..##
..#.#..###
##..##...#

Tile 1493:
###..####.
..##.....#
.........#
..#.#...##
..#......#
..##....##
.#..##.##.
.........#
##.#.#...#
#.#..#.#.#

Tile 1637:
###.##.#.#
.....#....
#....##..#
#.....#...
..###.##..
#.#.......
##.#...##.
....#....#
#...#.##..
..#..####.

Tile 2153:
.#.##.#...
.....#...#
......#...
...#.#...#
#.#..##...
...#..#...
#.##.#..#.
.#.....#..
.......#.#
###...#.#.

Tile 1129:
..#.###...
#.####..##
#......#..
###.......
##......#.
#.#..#..##
#..##...##
.#......#.
.#........
#######..#

Tile 3581:
#...##.##.
#####..#..
#.##.#####
.....#....
#.........
.....#...#
.#........
#........#
##...#.#.#
..##..#...

Tile 1303:
####.##...
#...##....
#.##......
#.....#...
#....##...
####.#.###
#.#.#.#..#
#..#....##
#.#....#..
.#.##.....

Tile 3209:
##..##.###
...#.##...
##..##.#.#
..#.....#.
#.###...##
##.#.#....
###......#
....##....
#........#
.###.#..#.

Tile 3613:
##..####..
.#...#...#
#.##......
...#......
#.....#.#.
##.#.##...
......#.##
#.........
#.#...#...
###.#.....

Tile 3833:
......###.
#.#......#
#..#......
.#.#..#...
#.#.#....#
.....#....
#.....#...
.........#
##....###.
....#..##.

Tile 2089:
.#..###.##
##.##...#.
##..##..##
.#.#..#...
.#....#...
##.....#.#
...#.....#
.#..#....#
##..##...#
##..#.#.##

Tile 1553:
..#.##....
#..##...#.
#.#..#...#
.##..#...#
##..###...
##.#.#....
#..#.#.###
.........#
......#..#
#.#.#....#

Tile 2213:
#####....#
..###..#..
...#......
.........#
.#.###....
#.........
.....##.##
###......#
#...#####.
.##.##..##

Tile 3347:
..#..#####
#.##...#..
##.#..####
...###..#.
#.##......
.#.##..#..
#.##.#..#.
###...##..
#.#..#.#.#
#.#...##..

Tile 3203:
#.####.#.#
#......#.#
#..#...#.#
.#........
#......#..
#.###...#.
........##
..##...#.#
..........
#...#..##.

Tile 1811:
.##.####.#
.#......##
.......#.#
#...##.##.
#.......#.
#.#.#.####
.#.......#
....#...#.
......###.
#...#..###

Tile 1531:
##...#.#.#
.##......#
#........#
#...#.....
#...###..#
...#.#....
#.......#.
.#..###.#.
.....####.
##.#.####.

Tile 3191:
##..###.##
#.###...#.
..#....#.#
##.#...###
..#.......
.....#....
#......#.#
.........#
..##.#...#
...##.....

Tile 3259:
...###..##
#...#....#
#.....#.#.
.#...#...#
.........#
.........#
...#.....#
#.....##.#
..#...#..#
...##.####

Tile 1579:
.#.##.#..#
.#.#.#....
...#.....#
#..#.....#
....#....#
#.#..#.###
#.#.#.....
##.......#
##.....##.
.###.....#

Tile 1861:
...##.#...
...#.....#
#.#.####..
......#..#
#....#...#
..#.#.##..
.#........
.##.#.#..#
##.....#..
...###.###

Tile 2857:
###.#.##..
.......#.#
#...#.....
##.#.....#
.#....#.#.
#.....#.##
#......#.#
#.....#..#
#.#.#....#
.#..#....#

Tile 3853:
...###...#
#.#.##..##
#.......##
..####..##
.#........
..........
...##.....
....#....#
#........#
.#.##..###

Tile 3917:
#.#.###.##
..........
#..#.#....
#.#....#.#
##..#...##
##.....#..
#.#....#..
.#.....#..
..#.....#.
######.###

Tile 1999:
.######...
.##.#....#
..#.......
.......#.#
.........#
........#.
#..#.#####
##....##..
#.#.....#.
.##.##....

Tile 3719:
..#..##...
##.###....
####..#.#.
#.....#...
#..##.#..#
....#.###.
.##..#...#
......#..#
.#.#....#.
#....###.#

Tile 3491:
....#.##..
#..#.#...#
.#..###..#
#...#.....
#..#...###
..#.#.....
##.#.....#
..##.###.#
#.##.....#
..#.#.####

Tile 3499:
#.##.#...#
#...#.####
.....#....
#.....#.##
.#........
.#.#...#..
.##.#.##..
....#....#
##...#..#.
#.#..##...

Tile 2311:
..#.#...##
#.#.......
.........#
#.....#...
#..#...#..
..##......
....#...#.
#..##...##
#.........
.#...###..

Tile 1459:
####.#...#
..#.####.#
.#.......#
..#.#....#
..........
#.....#.#.
#.....#...
###.#....#
..##..#...
....#..##.

Tile 1447:
.##.##....
.##....#..
######.#.#
..........
#.........
#...#.##.#
#...##...#
#.......##
....#.....
.##.#..#..

Tile 2579:
##...##...
#..#.#..##
...##.#..#
#.#......#
.#....#...
.##......#
#..#..#..#
..#...#.##
#..##....#
.##..###.#

Tile 2531:
#...#..###
.#..#.###.
#......##.
.##..#.#..
.....#..##
.....#.#..
#.#....#..
....#...#.
.......#..
.#.##..#.#

Tile 1019:
....####..
#....#.#..
#.#.#....#
.#...#...#
..#.#....#
#....##...
..#.###..#
#..#..#..#
..#.#.....
..##.#..#.

Tile 1151:
#..#.#.#..
#.....#...
.#..#.#.##
..###....#
..##..#.#.
.#..##....
#...#..##.
..#.###.#.
.#...#....
..###....#

Tile 3767:
.#...###.#
...#.##...
#....###..
...#..#..#
#...##....
##...#....
.##...###.
#...####..
##...###..
..##.#....

Tile 1871:
......#..#
#.#..#....
.........#
......##.#
#....#....
##..#.##.#
#.....#.##
#..#.....#
.#.#..#...
##.##...#.

Tile 2953:
#..##..#.#
#...#.....
.##.......
.#..#.....
##........
#.#..#.#.#
...##....#
...#....##
..#.#.....
.##...#.##

Tile 1153:
.#..######
.#.#.....#
#.....#...
##...#.##.
#...#....#
.#..#.#.#.
##...##...
.#.#.....#
..##..#..#
.......##.

Tile 3359:
#.#####.##
#...#....#
#..#...#..
.#.##....#
###.....##
.#..#.#..#
#........#
.##...#...
#.........
...#...#..

Tile 3257:
...#.####.
##.##....#
.......#.#
#........#
#...#....#
#...#....#
.#...#..#.
#...#....#
###.....##
.....#####

Tile 2557:
##..######
.........#
..##...#.#
#....#..##
...#.#..#.
.#.....##.
...##...##
..#.#...##
....#.#...
#.##...###

Tile 2851:
.#....####
#......#.#
#...#..#.#
#......#..
.#...#....
#.......#.
........#.
#......#.#
...#.....#
......##..

Tile 1103:
#...#.....
#..#..#...
...##.#..#
....###.##
....#..##.
.#..###...
##.....###
...#...#.#
......##.#
.#.#.#.##.

Tile 1801:
##.#...##.
....##..#.
#.......#.
.##...##..
......##..
.#...##..#
.#..#..#..
...#.#..##
##.....#..
#.#.#.#...

Tile 2731:
#.#.#.#..#
#.#....###
#####..#..
#...#.....
#.#...####
#.........
.#.....#..
..#.......
#......#.#
..#.#.##..

Tile 2111:
..##...#..
#...#..###
......##.#
..#.......
#........#
#.......#.
#...##...#
#....#...#
..#...#...
.#....###.

Tile 1613:
..###..#..
#...##...#
#.........
#...#.#..#
#.###...#.
#.##..#...
#......##.
##.#......
..#...#..#
.##...###.

Tile 3739:
#.#.#.#..#
###.#....#
..#..##.#.
.#..#...#.
#.####....
.#......#.
#....#...#
.........#
##..#....#
#...#.#.##

Tile 1297:
.##..#.##.
#.#...#.##
#...##..##
.#..##.###
#...#.....
.##.#....#
........#.
.####..#..
..#.....#.
###..##..#

Tile 2029:
#.....#.##
#.#..#...#
#.####..#.
....#.#.#.
#...#.#...
#......###
......##..
.........#
......##.#
#.###.#..#

Tile 1093:
#.#..#..##
##......#.
#.........
#.........
....#....#
#....###.#
#.#.....##
..#.......
.#.#....#.
#.###.#.##

Tile 2357:
#..#.##..#
..#.......
...#..#..#
.#.....##.
##.#...#.#
#.#.....#.
##.......#
#.#..##...
#....#..##
#.###..###

Tile 1231:
.######...
#..##.....
#........#
#........#
..........
....#...#.
#.##.#..##
##..#.##..
......#.##
.#...##...

Tile 2671:
####..###.
..#.......
...#..#...
#.#.......
.#.#..#...
##.##....#
#....##.#.
#...#....#
#...#.....
..#..##.#.

Tile 3137:
.#..##...#
...#.#..##
#...#....#
#....#...#
.##..##.#.
#.#....#..
#.#.....##
#..##...##
#.....##..
#.#.###.#.

Tile 1229:
...#######
#.#...#..#
..#.....#.
#.##.##.#.
.##.#..##.
....####..
..##..#...
#...#.....
#..###.#..
#.###..##.

Tile 1979:
#..#....##
#....#...#
.#.#....##
.......#.#
..#..##..#
#.#...##.#
...#..#..#
#....#..##
##......#.
.######..#

Tile 2341:
.#.##.....
###......#
........#.
##...#..#.
#...#...#.
#...##.#..
...#..#..#
..##.....#
#...##.#.#
...#..#.##

Tile 1373:
.#####..##
#.#.....#.
........##
.........#
....###.##
#.##.##..#
###.#.##..
..#.....#.
.........#
#.#.###.##

Tile 1483:
#.#..#..##
.##.###...
#.........
#..#......
#...##....
.##.....#.
.#...#.#..
..#......#
..#.#.#...
.##.######

Tile 3109:
.##.###.#.
....###.#.
#...#.....
#.......##
.#.#..####
..#..#####
##...#.#..
..##.....#
#..#..####
##..#.#...

Tile 3449:
##.###..#.
....#.#...
#...#.....
....##..#.
.##.#.#.##
.##..###.#
....##...#
...###....
#....#...#
.#...#.#..

Tile 2969:
##..#.##..
.#..###..#
...###.#.#
..#....#..
#####.....
.#.##....#
.......#.#
.........#
.#......#.
......#.#.

Tile 3877:
##..#...##
....#....#
#..##.....
.....#....
#......#..
.#...#...#
......##.#
##.....##.
..#..#...#
##..###.#.

Tile 3539:
..#...##..
........#.
..#.#....#
##.#.##..#
#...#..#..
..#.......
.#...##...
...#.##.#.
#..##..##.
......#.#.

Tile 3547:
####..#..#
........##
##.#...#.#
...##...##
.#..###..#
##.###..#.
.#..##..##
#....##...
......#...
.##.###..#

Tile 3863:
..#.##.###
....#.#..#
..#...#..#
##.#.#..##
.##.......
#.#...##..
#.#...##.#
.#.#....##
#.#...#.##
##..##....

Tile 2437:
#.##.#####
.#....#..#
#....#....
.....##..#
#..#.#..#.
......#...
..##.#.#..
..##......
.#..##...#
####.#####

Tile 2267:
#..###..##
.#........
###.#....#
....#.....
#.....#..#
..#.......
......####
.#........
#.#......#
...##.....

Tile 3671:
#.##.#####
..#..##...
..........
##.....#.#
.###......
###.....##
##..#....#
#....#....
##......##
###.#.#..#

Tile 3041:
#...######
.........#
.#....####
#.##......
.##...#...
##..#....#
.#.#...#.#
#..#.###..
##..#....#
##..#.###.

Tile 2467:
#####...#.
#.#.#.....
##........
##...#....
.......##.
##......#.
##.#..####
....##...#
####..#..#
#.#.#..###

Tile 3593:
..##.##..#
..........
.#.###..#.
......##..
..........
........#.
##...#.#.#
...##.#..#
...##....#
..##..#.##

Tile 3061:
####.##.#.
..##....#.
###..#...#
..........
.####...#.
..##..#...
...#......
##..#..##.
#.#...#..#
###.###..#

Tile 1409:
#.#.#...#.
#....#..##
......#...
..........
.#..##...#
###......#
#..#.#...#
###....#..
#.......##
#..##.#.#.

Tile 2207:
..#.##.###
#........#
.........#
..#.#...#.
#.##......
....##....
..#.#..##.
###.....#.
.###...#.#
#...#.##..

Tile 1069:
..#....###
#...#.....
.....#..#.
.###...#.#
..###....#
..........
#.....#..#
#.#..#..#.
#..##....#
...##...##

Tile 1187:
#...##..#.
#......#.#
#.......##
##.....###
.#...#.##.
##.#......
###.#...##
#.##...#..
#....#....
#.......#.

Tile 2549:
.###.....#
##.#.#..##
#...#..##.
##.......#
#.........
.#.#..#.##
..........
##...#...#
#....#...#
#####...##

Tile 2593:
#.#..##...
...##...##
.##..##.##
.#..#....#
....####.#
........#.
.###.....#
....##..##
#..#....##
.##..#.#..

Tile 1277:
.#.#...##.
..##.#.###
....#...##
......#.#.
..##.#.#.#
.....#..##
..#...##.#
....#..#.#
##..###...
#....#####

Tile 2251:
#..###..##
#....##...
###...##.#
.#.####.##
#.##....#.
.#...#....
#.......##
.#.#....#.
#.....#..#
###...##..

Tile 1061:
.#.#....##
#.........
.....#..##
...#..#...
..........
#..##.##.#
#...#...##
##.......#
..#.##....
#.#..#...#

Tile 3037:
#.....#.##
........#.
........#.
##..##..#.
.##.##....
##..#...#.
#....#.###
...#..#.#.
#.#####..#
...###.##.

Tile 3823:
.###..#...
#...#.....
....#.#...
#.#..###..
##.#..#.##
.####....#
.###.....#
.#...#...#
#..#####..
..###...#.

Tile 2087:
.#...#.###
.#.##..###
.....#...#
#...#.....
...#.#....
........##
........##
#..#..#..#
.#....##..
####...###

Tile 1321:
#.###.##.#
#...#.....
.##.#...##
#.....#..#
.#...#....
...##.....
#..##.....
#..#...##.
#........#
###.###.#.

Tile 1951:
###.####.#
#...#.....
#.#.#.###.
..##...#.#
#.#..#..#.
##.#.....#
#......#..
.#........
.#.......#
..##...#.#

Tile 3847:
.###.#..##
#..##..#..
..#....#..
#...#...##
#.........
.#...#....
.##.#...##
..#.#..###
...#..##.#
##.#.##..#

Tile 3851:
...##.##..
....#..#.#
.###..#..#
..........
..........
#........#
##..#....#
#......#.#
.....#.#..
.###.#.#..

Tile 3407:
#####.#.##
.......#..
#.....#...
#...##....
........#.
...##.#.#.
.##....##.
#.....#...
....#.....
#..#..#...

Tile 1709:
....#.#..#
....##.###
#.....#..#
#......#.#
.......###
..........
#.#.#....#
..#...##.#
#..#...#.#
.##.#.##..

Tile 1097:
#.###.##.#
.........#
....##.#..
...#.#..##
..#.#....#
..#..##..#
#####....#
#.#..###..
....#.....
######.##.

Tile 3301:
.#..#..#..
.#........
#..#.#....
......#..#
#....#..##
#........#
#.....#.##
#....#...#
...#.#..#.
..####.###

Tile 3517:
#####.##..
#...##..##
.#..#.....
#...#....#
..#.#...##
####..##..
#.#..#..#.
.....#....
.....#.#.#
..#..####.

Tile 2137:
#...##.##.
..#...#.##
#..#.....#
##...###.#
.#.#...#.#
..##..#..#
..#......#
#.#####.##
#..#......
####......

Tile 3623:
#.##.##.#.
.#..#....#
#..##.##..
...##....#
###..#....
..##.#....
.....#.###
......#...
#.........
#...#..##.

Tile 1867:
#..#.##.##
..#..##...
#.##......
##...##..#
..#...##..
#.#.#....#
.........#
.##.##....
...##.....
##...###.#

Tile 1787:
.#..#.##..
...#......
....#..#..
##.#.#.#..
...##....#
...#......
###......#
..........
.......##.
####..#...

Tile 2591:
....###.##
#..#....#.
......#..#
#........#
.....#....
###.#....#
.....###..
###.......
......#..#
..#.#.#...

Tile 1607:
.#.#..####
#.....##..
#..#.....#
..###...##
.......###
#..##.....
...#......
#...#...#.
#.....#.#.
...#...#..

Tile 3271:
.#.###.###
#........#
.#........
####....#.
.......#..
#.....#..#
##.##.##..
.#........
#......#..
.#..####.#

Tile 2063:
#...##.#.#
##...##.#.
.##.##.#..
#..#...#.#
..#.#....#
.##...##..
.#.#.#....
#...#....#
.#........
..#.#.#.##

Tile 1289:
.#..##....
..#..##...
.#....#...
.......#.#
##..#...#.
...##...##
...##.....
.##.#....#
##.....#..
..#.###.#.

Tile 1213:
..#..##.#.
#.#..#.#..
#.........
#..#...#..
#...#...##
..#.......
...##.#...
.##.#.....
##.##....#
####.#.###
"""

# Run the main function and print the result
result = main(input_text)
print("Water Roughness:", result)
